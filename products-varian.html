<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Varian Produk</title>
    <!-- Include Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Include Font Awesome via CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100 p-8">
    <div class="max-w-6xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <!-- Layout: 2 Kolom -->
        <div class="flex items-start space-x-8">
            <!-- Kolom 1: Gambar Utama -->
            <div class="flex-1 w-64">
                <img id="main-image"
                    src="https://ik.imagekit.io/zlt25mb52fx/ahmcdn/tr:w-550,f-auto/uploads/product/thumbnail/thumbnail-beat-3-03062024-050824.png"
                    alt="Main Image" class="w-full h-auto object-contain rounded-lg" />
                <div class="flex justify-center items-center">
                    <!-- Social Media & Wishlist Icons -->
                    <div class="flex space-x-4 mt-4">
                        <!-- Facebook Icon -->
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://example.com" target="_blank"
                            class="text-blue-600 hover:text-blue-700">
                            <i class="fab fa-facebook-f text-2xl"></i>
                        </a>

                        <!-- Instagram Icon -->
                        <a href="https://www.instagram.com/" target="_blank" class="text-pink-600 hover:text-pink-700">
                            <i class="fab fa-instagram text-2xl"></i>
                        </a>

                        <!-- WhatsApp Icon -->
                        <a href="https://wa.me/?text=Check%20this%20out%20https://example.com" target="_blank"
                            class="text-green-500 hover:text-green-600">
                            <i class="fab fa-whatsapp text-2xl"></i>
                        </a>

                        <!-- Twitter Icon -->
                        <a href="https://twitter.com/share?url=https://example.com" target="_blank"
                            class="text-blue-400 hover:text-blue-500">
                            <i class="fab fa-twitter text-2xl"></i>
                        </a>

                        <!-- Messenger Icon -->
                        <a href="https://www.messenger.com/t/yourpage" target="_blank"
                            class="text-blue-500 hover:text-blue-600">
                            <i class="fab fa-facebook-messenger text-2xl"></i>
                        </a>

                        <!-- Wishlist Icon -->
                        <button id="wishlist-btn" class="text-red-500 hover:text-red-600">
                            <i class="fas fa-heart text-2xl"></i>
                        </button>
                    </div>
                </div>

            </div>

            <!-- Kolom 2: Nama Produk, Harga, Varian, Warna -->
            <div class="flex-1">
                <!-- Nama Produk -->
                <p class="text-lg mb-2 font-semibold"><strong id="product-name"></strong></p>
                <!-- Rating, Jumlah Penilaian, Terjual, dan Link Laporan -->
                <div class="flex items-center space-x-6 mb-4">
                    <!-- Rating -->
                    <div class="flex items-center">
                        <span class="text-yellow-500" id="rating-stars">
                            <!-- Rating stars will be dynamically inserted here by JavaScript -->
                        </span>
                        <span class="ml-2 text-sm" id="rating-value">
                            <!-- Rating value will be dynamically inserted here -->
                        </span>
                    </div>

                    <!-- Jumlah Penilaian -->
                    <p class="text-sm text-gray-500"><strong id="rating-count"></strong></p>

                    <!-- Terjual -->
                    <p class="text-sm text-gray-500"><strong id="sold-count"></strong></p>

                    <!-- Link Laporan -->
                    <a href="/laporan" class="text-blue-500 hover:underline text-sm">Laporan</a>
                </div>

                <!-- Harga Produk -->
                <p class="text-xl font-semibold text-red-600 mb-4"><strong id="price"></strong></p>

                <!-- Pilihan Tipe (Varian) -->
                <div class="mb-4">
                    <h3 class="text-lg font-medium mb-2">Pilih Tipe</h3>
                    <div id="variant-buttons" class="space-x-4">
                        <!-- Tombol untuk memilih tipe motor akan ditambahkan oleh JavaScript -->
                    </div>
                </div>

                <!-- Pilihan Warna -->
                <div class="mb-4">
                    <h3 class="text-lg font-medium mb-2">Pilih Warna</h3>
                    <div id="variant-images" class="flex space-x-4">
                        <!-- Gambar varian warna akan ditambahkan oleh JavaScript -->
                    </div>
                </div>

                <!-- Kuantitas -->
                <div class="mb-4">
                    <h3 class="text-lg font-medium mb-2">Kuantitas</h3>
                    <div class="flex items-center space-x-2">
                        <div class="group relative flex items-center border rounded-lg w-auto">
                            <button id="decrease-btn"
                                class="px-4 py-2 bg-gray-300 rounded-l-lg hover:bg-gray-400 focus:outline-none"
                                disabled>-</button>
                            <input id="quantity" type="number" value="1" min="1"
                                class="w-16 text-center border-0 focus:ring-0 focus:outline-none" readonly />
                            <button id="increase-btn"
                                class="px-4 py-2 bg-gray-300 rounded-r-lg hover:bg-gray-400 focus:outline-none"
                                disabled>+</button>
                        </div>
                    </div>
                </div>
                <!-- Add to Cart & Buy Now Buttons -->
                <div class="flex space-x-4 mt-6">
                    <!-- Add to Cart Button (Outline) -->
                    <button id="add-to-cart-btn"
                        class="px-6 py-3 border-2 bg-red-100 border-red-600 text-red-600 rounded-md hover:bg-red-600 hover:text-white">
                        <i class="fas fa-shopping-cart mr-2"></i> Masukkan Keranjang
                    </button>

                    <!-- Buy Now Button (Solid) -->
                    <button id="buy-now-btn" class="px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700">
                        <i class="fas fa-credit-card mr-2"></i> Beli Sekarang
                    </button>
                </div>

            </div>
        </div>
    </div>
    <script>
        // Function to get the product ID from the URL query parameters
        function getProductIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id'); // 'id' is the name of the URL parameter
        }

        // Function to fetch products from the products.json file
        async function fetchProductData() {
            try {
                const productId = getProductIdFromUrl(); // Get the ID from the URL
                const response = await fetch('products.json'); // Fetch all products
                const data = await response.json();

                // Find the product by ID
                const product = data.find(p => p.id === parseInt(productId)); // Assuming each product has a unique 'id'

                if (product) {
                    // Update the main image based on the product's 'image' field
                    updateMainImage(product.image);

                    // You can also display other product information here
                    displayProductInfo(product);
                    displayRating(product);
                    displayVariantButtons(product);
                } else {
                    console.error('Product not found!');
                }

            } catch (error) {
                console.error('Error fetching product data:', error);
            }
        }

        // Function to update the main image based on the product data
        function updateMainImage(imageUrl) {
            const mainImage = document.getElementById('main-image');
            mainImage.src = imageUrl; // Dynamically update the image source
        }

        // Call fetchProductData() when the page loads
        document.addEventListener('DOMContentLoaded', fetchProductData);


        // Function to display the product name, rating, and sold count
        function displayProductInfo(product) {
            const productName = document.getElementById('product-name');
            productName.textContent = product.name;

            // Display the sold count
            const soldCount = document.getElementById('sold-count');
            soldCount.textContent = `${product.terjual} unit`;

            // Display the rating count
            const ratingCount = document.getElementById('rating-count');
            ratingCount.textContent = `${product.penilaian} penilaian`;

            // Display price
            const price = document.getElementById('price');
            price.textContent = `Rp ${product.price.toLocaleString()}`;
        }

        // Function to display rating dynamically
        function displayRating(product) {
            const ratingStarsContainer = document.getElementById('rating-stars');
            const ratingValueContainer = document.getElementById('rating-value');

            const rating = product.rating;
            let starsHTML = '';
            for (let i = 0; i < rating; i++) {
                starsHTML += '<i class="fas fa-star"></i>';
            }
            for (let i = rating; i < 5; i++) {
                starsHTML += '<i class="far fa-star"></i>';
            }
            ratingStarsContainer.innerHTML = starsHTML;
            ratingValueContainer.textContent = rating.toFixed(1);
        }

        // Function to display buttons for selecting variant type
        function displayVariantButtons(product) {
            const variantButtonsContainer = document.getElementById('variant-buttons');
            product.varian.tipe.forEach((variant, index) => {
                const button = document.createElement('button');
                button.textContent = variant.nama;
                button.classList.add(
                    'px-4', 'py-2', 'text-black', 'rounded-md', 'border-2', 'border-red-500', 'hover:bg-red-500', 'hover:text-white', 'focus:bg-red-500', 'focus:ring-red', 'focus:text-white'
                );
                button.addEventListener('click', () => {
                    updateColorOptions(product, index);
                    enableQuantityButtons();
                });
                variantButtonsContainer.appendChild(button);
            });
        }

        // Function to update the color options based on the selected variant
        function updateColorOptions(product, selectedVariantIndex) {
            const variantImagesContainer = document.getElementById('variant-images');
            variantImagesContainer.innerHTML = '';

            const selectedVariant = product.varian.tipe[selectedVariantIndex];
            selectedVariant.warna.forEach(color => {
                const img = document.createElement('img');
                img.src = color.url;
                img.alt = color.nama;
                img.classList.add('w-20', 'h-20', 'object-contain', 'rounded-lg', 'cursor-pointer');
                img.addEventListener('click', () => {
                    updateMainImage(color.url);
                });
                variantImagesContainer.appendChild(img);
            });
        }

        // Function to update the main image
        function updateMainImage(url) {
            const mainImage = document.getElementById('main-image');
            mainImage.src = url;
        }

        // Enable the quantity buttons after a variant is selected
        function enableQuantityButtons() {
            document.getElementById('decrease-btn').disabled = false;
            document.getElementById('increase-btn').disabled = false;
        }

        // Quantity update logic
        const decreaseButton = document.getElementById('decrease-btn');
        const increaseButton = document.getElementById('increase-btn');
        const quantityInput = document.getElementById('quantity');

        decreaseButton.addEventListener('click', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity > 1) {
                quantity--;
                quantityInput.value = quantity;
            }
        });

        increaseButton.addEventListener('click', () => {
            let quantity = parseInt(quantityInput.value);
            quantity++;
            quantityInput.value = quantity;
        });

        // Fetch and display product data when the page loads
        fetchProductData();
    </script>
</body>

</html>