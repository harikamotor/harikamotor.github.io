<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Careers</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    
  <body class="bg-gray-100 text-gray-900">
    <header class="bg-red-600 text-white py-4 shadow-md relative z-10">
      <div class="container mx-auto flex justify-between items-center px-4">
        <h1 class="text-2xl font-bold">Harika Motor</h1>
        <nav>
          <ul class="flex space-x-1">
            <li>
              <a
                href="index.html"
                class="hover:bg-red-700 text-white block px-3 py-2 rounded-md"
                >Home</a
              >
            </li>
            <li>
              <a
                href="products.html"
                class="hover:bg-red-700 text-white block px-3 py-2 rounded-md"
                >Products</a
              >
            </li>
            <li>
              <a
                href="#"
                class="hover:bg-red-700 text-white block px-3 py-2 rounded-md"
                >Promotions</a
              >
            </li>
            <li class="relative">
              <a
                href="#"
                class="hover:bg-red-700 text-white block px-3 py-2 rounded-md"
                id="dealers-btn"
                >Dealers</a
              >
              <ul
                id="dealers-menu"
                class="absolute left-0 hidden bg-white text-black mt-2 space-y-2 p-2 shadow-lg w-60"
              >
                <li>
                  <a
                    href="https://g.co/kgs/DX3jJqb"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Harika Motor Bekasi</a
                  >
                </li>
                <li>
                  <a
                    href="https://g.co/kgs/ZuwkWct"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Harika Motor Bogor</a
                  >
                </li>
                <li>
                  <a
                    href="https://g.co/kgs/oBzjSNB"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Harika Motor Karawang</a
                  >
                </li>
              </ul>
            </li>
            <li class="relative">
              <a
                href="#"
                class="hover:bg-red-700 text-white block px-3 py-2 rounded-md"
                id="after-sales-btn"
                >After Sales</a
              >
              <ul
                id="after-sales-menu"
                class="absolute left-0 hidden bg-white text-black mt-2 space-y-2 p-2 shadow-lg w-60"
              >
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Service</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Honda Genuine Parts</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >HGP Tires</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >AHM Oil</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Accessories</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Apparel</a
                  >
                </li>
              </ul>
            </li>
            <li class="relative">
              <a
                href="#"
                class="hover:bg-red-700 text-white block px-3 py-2 rounded-md"
                id="corporate-btn"
                >Corporate</a
              >
              <ul
                id="corporate-menu"
                class="absolute left-0 hidden bg-white text-black mt-2 space-y-2 p-2 shadow-lg"
              >
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >About Us</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Sustainability</a
                  >
                </li>
                <li>
                  <a
                    href="careers.html"
                    class="bg-white hover:bg-gray-300 hover:text-white block px-4 py-2"
                    >Careers</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <script>
      // Fungsi untuk toggle dropdown
      function toggleDropdown(buttonId, menuId) {
        const button = document.getElementById(buttonId);
        const menu = document.getElementById(menuId);
        button.addEventListener("click", function (e) {
          e.preventDefault();
          // Menutup dropdown lainnya jika terbuka
          document.querySelectorAll('ul[id$="-menu"]').forEach((el) => {
            if (el !== menu) el.classList.add("hidden");
          });
          // Menampilkan/menyembunyikan dropdown yang di-*klik*
          menu.classList.toggle("hidden");
        });
      }

      // Memanggil fungsi untuk setiap tombol dropdown
      toggleDropdown("dealers-btn", "dealers-menu");
      toggleDropdown("after-sales-btn", "after-sales-menu");
      toggleDropdown("corporate-btn", "corporate-menu");

      // Klik di luar untuk menutup dropdown
      window.addEventListener("click", function (e) {
        if (!e.target.matches("a") && !e.target.closest("ul")) {
          document
            .querySelectorAll('ul[id$="-menu"]')
            .forEach((el) => el.classList.add("hidden"));
        }
      });
    </script>
    <div class="container mx-auto p-4">
      <h1 class="text-3xl font-bold mb-6 text-center">Available Careers</h1>

      <!-- Pencarian dan Filter -->
      <div
        class="flex flex-col md:flex-row md:items-center justify-between mb-6 space-y-4 md:space-y-0"
      >
        <!-- Input Pencarian -->
        <input
          id="searchInput"
          type="text"
          placeholder="Search careers..."
          class="p-3 w-full md:w-1/2 border border-gray-300 rounded-md"
          oninput="filterCareers()"
        />

        <!-- Dropdown Filter Lokasi -->
        <select
          id="locationFilter"
          class="p-3 w-full md:w-1/4 border border-gray-300 rounded-md"
          onchange="filterCareers()"
        >
          <option value="">All Locations</option>
          <!-- Options lokasi akan di-generate oleh JavaScript -->
        </select>
      </div>

      <!-- Container untuk Karir -->
      <div id="careers-container" class="space-y-6">
        <!-- Data karir akan di-render di sini oleh JavaScript -->
      </div>

      <!-- Pagination Controls -->
      <div
        id="pagination-controls"
        class="flex justify-center items-center space-x-2 mt-6"
      >
        <!-- Tombol Pagination akan di-generate di sini oleh JavaScript -->
      </div>
    </div>

    <script>
      let careersData = [];
      let currentPage = 1;
      const itemsPerPage = 3; // Jumlah item per halaman

      // Fetch data dari careers.json
      fetch("careers.json")
        .then((response) => response.json())
        .then((data) => {
          careersData = data.careers;
          populateLocationFilter(careersData);
          filterCareers(); // Tampilkan data dengan pagination
        })
        .catch((error) => console.error("Error fetching careers data:", error));

      // Fungsi untuk menampilkan karir dengan pagination
      function displayCareers(careers, page = 1) {
        const container = document.getElementById("careers-container");
        container.innerHTML = ""; // Kosongkan sebelum render ulang

        const start = (page - 1) * itemsPerPage;
        const end = start + itemsPerPage;
        const careersToDisplay = careers.slice(start, end); // Ambil item sesuai halaman

        careersToDisplay.forEach((career) => {
          const careerElement = document.createElement("div");
          careerElement.classList.add(
            "bg-white",
            "shadow-md",
            "rounded-lg",
            "p-6",
            "border",
            "border-gray-200",
            "flex",
            "flex-col",
            "md:flex-row",
            "justify-between",
            "items-center"
          );

          // Tentukan status "Tersedia" atau "Tidak Tersedia"
          const statusClass = career.available
            ? "bg-green-100 text-green-800"
            : "bg-red-100 text-red-800";
          const statusText = career.available ? "Available" : "Not Available";

          careerElement.innerHTML = `
                <div class="md:flex-1">
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">${
                      career.title
                    } (${career.location})</h3>
                    <p class="text-gray-600"><strong>Department:</strong> ${
                      career.department
                    }</p>
                    <p class="text-gray-600 mb-4"><strong>Description:</strong> ${
                      career.description
                    }</p>
                    <p class="text-gray-600"><strong>Salary:</strong> ${
                      career.salary
                    }</p>
                    <p class="text-gray-600 mt-4"><strong>Requirements:</strong></p>
                    <ul class="list-disc list-inside text-gray-600 mt-2">
                        ${career.requirements
                          .map((req) => `<li>${req}</li>`)
                          .join("")}
                    </ul>
                    <p class="mt-4">
                        <span class="px-2 py-1 rounded ${statusClass}">${statusText}</span>
                    </p>
                </div>
                <!-- Tombol Apply -->
                <div class="mt-4 md:mt-0 md:ml-6">
                    ${
                      career.available
                        ? `
                        <a href="${career.applyLink}" target="_blank" class="inline-block px-4 py-2 bg-blue-500 text-white rounded-md shadow hover:bg-blue-600 transition-colors duration-300">
                            Apply
                        </a>`
                        : `
                        <button disabled class="inline-block px-4 py-2 bg-gray-300 text-gray-700 rounded-md shadow cursor-not-allowed">
                            Apply
                        </button>`
                    }
                </div>
            `;
          container.appendChild(careerElement);
        });

        updatePaginationControls(careers.length, page);
      }

      // Fungsi untuk mengisi opsi filter lokasi
      function populateLocationFilter(careers) {
        const locationFilter = document.getElementById("locationFilter");
        const locations = [
          ...new Set(careers.map((career) => career.location)),
        ]; // Dapatkan lokasi unik
        locations.forEach((location) => {
          const option = document.createElement("option");
          option.value = location;
          option.textContent = location;
          locationFilter.appendChild(option);
        });
      }

      // Fungsi untuk memfilter karir berdasarkan pencarian dan filter lokasi
      function filterCareers() {
        const searchInput = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const locationFilter = document.getElementById("locationFilter").value;

        const filteredCareers = careersData.filter((career) => {
          const matchesSearch =
            career.title.toLowerCase().includes(searchInput) ||
            career.description.toLowerCase().includes(searchInput);
          const matchesLocation = locationFilter
            ? career.location === locationFilter
            : true;
          return matchesSearch && matchesLocation;
        });

        displayCareers(filteredCareers, currentPage);
      }

      // Fungsi untuk memperbarui kontrol pagination
      function updatePaginationControls(totalItems, currentPage) {
        const paginationControls = document.getElementById(
          "pagination-controls"
        );
        paginationControls.innerHTML = ""; // Kosongkan sebelum render ulang

        const totalPages = Math.ceil(totalItems / itemsPerPage);

        // Tombol "Previous"
        const prevButton = document.createElement("button");
        prevButton.textContent = "Previous";
        prevButton.classList.add(
          "px-4",
          "py-2",
          "bg-red-500",
          "text-white",
          "rounded-md",
          "mr-2"
        );
        prevButton.disabled = currentPage === 1; // Nonaktifkan jika di halaman pertama
        prevButton.onclick = () => {
          if (currentPage > 1) {
            currentPage--;
            displayCareers(careersData, currentPage);
          }
        };
        paginationControls.appendChild(prevButton);

        // Tombol "Next"
        const nextButton = document.createElement("button");
        nextButton.textContent = "Next";
        nextButton.classList.add(
          "px-4",
          "py-2",
          "bg-red-500",
          "text-white",
          "rounded-md"
        );
        nextButton.disabled = currentPage === totalPages; // Nonaktifkan jika di halaman terakhir
        nextButton.onclick = () => {
          if (currentPage < totalPages) {
            currentPage++;
            displayCareers(careersData, currentPage);
          }
        };
        paginationControls.appendChild(nextButton);
      }
    </script>
  </body>
</html>
